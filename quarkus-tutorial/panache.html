<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hibernate with Panache :: Quarkus Tutorial</title>
    <link rel="canonical" href="https://redhat-developer-demos.github.io/quarkus-tutorial/quarkus-tutorial/panache.html">
    <meta name="generator" content="Antora 2.3.1">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-developer-demos.github.io/quarkus-tutorial">Quarkus Tutorial</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="quarkus-tutorial" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Requirements</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setup.html">Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Basics</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="basics.html">Basics and Fundamentals</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration.html">Configuration</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="panache.html">Hibernate with Panache</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spring.html">Spring Compatibility</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kubernetes.html">Deploy to Kubernetes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cloud Native</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rest-client.html">REST Client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fault-tolerance.html">Fault Tolerance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="health.html">Health Check</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="metrics.html">Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reactive.html">Reactive with Mutiny</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kafka-and-streams.html">Apache Kafka with Reactive Streams</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="security.html">Security with JWT RBAC</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">quarkus-tutorial</a></li>
    <li>Basics</li>
    <li><a href="panache.html">Hibernate with Panache</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-developer-demos/quarkus-tutorial/edit/master/documentation/modules/ROOT/pages/panache.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Hibernate with Panache</h1>
<div class="sect1">
<h2 id="quarkusp-demo-overview"><a class="anchor" href="#quarkusp-demo-overview"></a>Demo Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ll learn how easy and productive is Quarkus with Hibernate with Panache. For this, we&#8217;ll develop a simple CRUD REST API that handles information about fruits.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll use <a href="http://www.h2database.com" target="_blank" rel="noopener">H2</a> as our backing database, but it&#8217;s very easy to use other database engines with Quarkus. As an exercise for later, we suggest you to try your favorite database engine with the documentation found <a href="https://quarkus.io/guides/datasource" target="_blank" rel="noopener">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_extensions"><a class="anchor" href="#_adding_extensions"></a>Adding Extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus provides a lot of optimized dependencies to its ecosystem through <strong>extensions</strong>. For this particular chapter, we&#8217;ll need to add extensions that enables us to work with H2, Hibernate ORM, Panache (a novel persistence API), and JSON.</p>
</div>
<div class="paragraph">
<p>You probably still have <code>mvn quarkus:dev</code> running in your terminal. And that&#8217;s perfectly fine!</p>
</div>
<div class="paragraph">
<p>Just open a new terminal window, and make sure you&#8217;re at the root of your <code>fruits-app</code> project, then run:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:add-extension -Dextension="quarkus-resteasy-jsonb, quarkus-jdbc-h2, quarkus-hibernate-orm-panache, quarkus-smallrye-openapi"</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">[INFO] Scanning for projects...
[INFO]
[INFO] ------------------&lt; com.redhat.developers:fruits-app &gt;------------------
[INFO] Building fruits-app 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- quarkus-maven-plugin:1.4.2.Final:add-extension (default-cli) @ fruits-app ---
✅ Adding extension io.quarkus:quarkus-resteasy-jsonb
✅ Adding extension io.quarkus:quarkus-smallrye-openapi
✅ Adding extension io.quarkus:quarkus-hibernate-orm-panache
✅ Adding extension io.quarkus:quarkus-jdbc-h2
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  1.131 s
[INFO] Finished at: 2020-05-10T22:05:46-04:00
[INFO] ------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll notice that by running this command the Quarkus maven plugin added some dependencies to your <code>pom.xml</code> file. And best of all: Quarkus will autodetect and apply the changes, and you don&#8217;t even need to restart Quarkus!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_database_properties_to_your_configuration"><a class="anchor" href="#_adding_database_properties_to_your_configuration"></a>Adding database properties to your configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add the following database properties to your <code>application.properties</code> so that it looks like:</p>
</div>
<div id="quarkuspdb-update-props" class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-config hljs" data-lang="config"># Configuration file
# key = value
greeting=Hello y'all!
quarkus.datasource.url=jdbc:h2:mem:default
quarkus.datasource.driver=org.h2.Driver
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.sql-load-script=import.sql</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_fruit_entity"><a class="anchor" href="#_create_fruit_entity"></a>Create Fruit Entity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a new <code>Fruit</code> Java class in <code>src/main/java</code> in the <code>com.redhat.developers</code> package with the following contents:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.developers;

import javax.persistence.Entity;

import io.quarkus.hibernate.orm.panache.PanacheEntity;

@Entity
public class Fruit extends PanacheEntity {

    public String name;

    public String season;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that we&#8217;re not providing an <code>@Id</code>, nor we&#8217;re creating the getters and setters. Don&#8217;t worry. It&#8217;s a <strong>Panache</strong> feature. By extending <code>PanacheEntity</code>, we&#8217;re using the <em>Active Record</em> persistence pattern instead of a <em>DAO</em>. This means that all persistence methods are blended with our own <code>Entity</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>What is Panache ?</strong></p>
</div>
<div class="paragraph">
<p>Hibernate ORM is the de facto JPA implementation and offers you the full breadth of an Object Relational Mapper. It makes complex mappings possible, but it does not make simple and common mappings trivial. Hibernate ORM with Panache focuses on making your entities trivial and fun to write in Quarkus.</p>
</div>
<div class="paragraph">
<p>Fore more information please refer to the <a href="https://quarkus.io/guides/hibernate-orm-panache-guide" target="_blank" rel="noopener">Panache Guide</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_fruit_resource"><a class="anchor" href="#_create_fruit_resource"></a>Create Fruit Resource</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a new <code>FruitResource</code> Java class in <code>src/main/java</code> in the <code>com.redhat.developers</code> package with the following contents:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.developers;

import java.util.List;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/fruit")
public class FruitResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Fruit&gt; fruits() {
        return Fruit.listAll();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we should everything in place to query our <strong>GET</strong> REST endpoint:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl localhost:8080/fruit</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>We have an empty JSON array as the response, which is expected, since our database is currently empty.</p>
</div>
<div class="sect2">
<h3 id="_adding_a_post_endpoint"><a class="anchor" href="#_adding_a_post_endpoint"></a>Adding a POST endpoint</h3>
<div class="paragraph">
<p>Let&#8217;s change our <code>FruitResource</code> class to also contain a <strong>POST</strong> REST endpoint:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.developers;

import java.util.List;

import javax.transaction.Transactional;
import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.Status;

@Path("/fruit")
public class FruitResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Fruit&gt; fruits() {
        return Fruit.listAll();
    }

    @Transactional
    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public Response newFruit(Fruit fruit) {
        fruit.id = null;
        fruit.persist();
        return Response.status(Status.CREATED).entity(fruit).build();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can insert a new fruit by using <code>curl</code>:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -d '{"name": "Banana", "season": "Summer"}' -H "Content-Type: application/json" http://localhost:8080/fruit</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">{"id":1,"name":"Banana","season":"Summer"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now if you refresh your browser pointing to <a href="http://localhost:8080/fruit" class="bare" target="_blank" rel="noopener">http://localhost:8080/fruit</a>, you should see a response like:</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "id": 1,
    "name": "Banana",
    "season": "Summer"
  }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_custom_finders"><a class="anchor" href="#_creating_custom_finders"></a>Creating custom finders</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;re using H2, which is an in-memory database. This means that every time Quarkus restarts, we&#8217;ll lose all the information we have provided.</p>
</div>
<div class="paragraph">
<p>To provide some meaninful results for our custom finder, let&#8217;s create some initial data to be populated to our database.</p>
</div>
<div class="paragraph">
<p>Create the file <code>import.sql</code> in the folder <code>src/main/resources</code> with the following content:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Mango','Spring');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Strawberry','Spring');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Orange','Winter');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'GrapeFruit','Winter');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Blueberry','Summer');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Banana','Summer');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Plum','Summer');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Apple','Fall');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Grapes','Fall');</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now if you refresh your browser pointing to <a href="http://localhost:8080/fruit" class="bare" target="_blank" rel="noopener">http://localhost:8080/fruit</a>, you should see a response like:</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "id": 1,
    "name": "Mango",
    "season": "Spring"
  },
  {
    "id": 2,
    "name": "Strawberry",
    "season": "Spring"
  },
  {
    "id": 3,
    "name": "Orange",
    "season": "Winter"
  },
  {
    "id": 4,
    "name": "GrapeFruit",
    "season": "Winter"
  },
  {
    "id": 5,
    "name": "Blueberry",
    "season": "Summer"
  },
  {
    "id": 6,
    "name": "Banana",
    "season": "Summer"
  },
  {
    "id": 7,
    "name": "Plum",
    "season": "Summer"
  },
  {
    "id": 8,
    "name": "Apple",
    "season": "Fall"
  },
  {
    "id": 9,
    "name": "Grapes",
    "season": "Fall"
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_a_custom_finder_to_the_fruit_entity"><a class="anchor" href="#_adding_a_custom_finder_to_the_fruit_entity"></a>Adding a custom finder to the <code>Fruit</code> Entity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Update the <code>Fruit</code> class to contain a finder method <code>findBySeason</code> like:</p>
</div>
<div id="quarkusp-find-fruits" class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.developers;

import java.util.List;

import javax.persistence.Entity;

import io.quarkus.hibernate.orm.panache.PanacheEntity;

@Entity
public class Fruit extends PanacheEntity {

    public String name;

    public String season;

    public static List&lt;Fruit&gt; findBySeason(String season) {
        return find("season", season).list();
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_update_the_get_rest_endpoint_to_use_a_queryparam"><a class="anchor" href="#_update_the_get_rest_endpoint_to_use_a_queryparam"></a>Update the GET REST endpoint to use a QueryParam</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Update the <code>FruitResource</code> class by changing the <code>fruits</code> method to use a <code>@QueryParam</code>:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.developers;

import java.util.List;

import javax.transaction.Transactional;
import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.Status;

@Path("/fruit")
public class FruitResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Fruit&gt; fruits(@QueryParam("season") String season) {
        if (season != null) {
            return Fruit.findBySeason(season);
        }
        return Fruit.listAll();
    }

    @Transactional
    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public Response newFruit(Fruit fruit) {
        fruit.id = null;
        fruit.persist();
        return Response.status(Status.CREATED).entity(fruit).build();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s try to filter only the fruits with the <strong>Summer</strong> season:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl localhost:8080/fruit?season=Summer</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "id": 5,
    "name": "Blueberry",
    "season": "Summer"
  },
  {
    "id": 6,
    "name": "Banana",
    "season": "Summer"
  },
  {
    "id": 7,
    "name": "Plum",
    "season": "Summer"
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_repository_instead_of_activerecord_pattern"><a class="anchor" href="#_using_repository_instead_of_activerecord_pattern"></a>Using Repository instead of ActiveRecord pattern</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Is <code>PanacheEntity</code> too opinionated for you? Maybe you prefer the traditional <strong>Repository</strong> pattern? Don&#8217;t worry: we got you covered.</p>
</div>
<div class="paragraph">
<p>Panache also helps you to create Repositories.</p>
</div>
<div class="paragraph">
<p>Create the <code>FruitRepository</code> Java class in <code>src/main/java</code> in the <code>com.redhat.developers</code> package with the following contents:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.developers;

import java.util.List;

import javax.enterprise.context.ApplicationScoped;

import io.quarkus.hibernate.orm.panache.PanacheRepository;

@ApplicationScoped
public class FruitRepository implements PanacheRepository&lt;Fruit&gt; {

    public List&lt;Fruit&gt; findBySeason(String season) {
        return find("season", season).list();
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_update_fruitresource_to_use_fruitrepository"><a class="anchor" href="#_update_fruitresource_to_use_fruitrepository"></a>Update FruitResource to use FruitRepository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now let&#8217;s update our <code>FruitResource</code> class to use the <code>FruitRepository</code> we just created:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.developers;

import java.util.List;

import javax.transaction.Transactional;
import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.Status;

@Path("/fruit")
public class FruitResource {

    FruitRepository fruitRepository;

    public FruitResource(FruitRepository fruitRepository) {
        this.fruitRepository = fruitRepository;
    }

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Fruit&gt; fruits(@QueryParam("season") String season) {
        if (season != null) {
            return fruitRepository.findBySeason(season);
        }
        return Fruit.listAll();
    }

    @Transactional
    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public Response newFruit(Fruit fruit) {
        fruit.id = null;
        fruit.persist();
        return Response.status(Status.CREATED).entity(fruit).build();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s try again to filter only the fruits with the <strong>Spring</strong> season:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl localhost:8080/fruit?season=Spring</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "id": 1,
    "name": "Mango",
    "season": "Spring"
  },
  {
    "id": 2,
    "name": "Strawberry",
    "season": "Spring"
  }
]</code></pre>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
